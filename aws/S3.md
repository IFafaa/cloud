# Amazon S3 - Resumo Completo

## Visão Geral

O **Amazon S3 (Simple Storage Service)** é um serviço da AWS para **armazenamento de objetos**, altamente escalável, durável e disponível.

É amplamente utilizado para armazenar:
- Imagens
- Vídeos
- Backups
- Logs
- Arquivos estáticos
- Data Lakes

---

## Classes de Armazenamento

O S3 oferece diferentes classes de armazenamento para equilibrar **custo, disponibilidade e frequência de acesso**.

### Principais Classes

- **S3 Standard**
  - Alta durabilidade
  - Alta disponibilidade
  - Baixa latência
  - Classe padrão ao criar um bucket
  - Ideal para arquivos acessados diariamente

- **S3 Intelligent-Tiering**
  - Move objetos automaticamente entre camadas
  - Baseado no padrão de acesso
  - Ideal para dados com acesso imprevisível

- **S3 Standard-IA (Infrequent Access)**
  - Menor custo de armazenamento
  - Cobra por acesso
  - Alta disponibilidade
  - Ideal para backups mensais ou dados raramente acessados

- **S3 One Zone-IA**
  - Similar ao Standard-IA
  - Armazenado em apenas **1 Zona de Disponibilidade**
  - Mais barato, porém menos resiliente

- **S3 Glacier Instant Retrieval**
  - Acesso quase imediato
  - Ideal para dados antigos que ainda podem ser acessados a qualquer momento

- **S3 Glacier Deep Archive**
  - Classe mais barata do S3
  - Ideal para armazenamento de longo prazo
  - Recuperação pode levar até **12 horas**
  - Usado para compliance, auditoria e arquivos históricos

- **S3 Reduced Redundancy (Obsoleto)**
  - Não recomendado
  - O S3 Standard é mais barato e mais confiável atualmente

---

## Versionamento

O versionamento permite manter **múltiplas versões de um mesmo objeto** no bucket.

### Sem versionamento

- Ao deletar um objeto, ele é **perdido permanentemente**

### Com versionamento ativado

- Ao deletar um objeto, é criada uma **Delete Marker**
- O objeto pode ser **recuperado facilmente**
- Ao sobrescrever um arquivo, a versão antiga fica oculta, mas não é removida

### Observações importantes

- Ao tentar deletar um objeto versionado:
  - O console pede confirmação digitando `delete`
  - Para exclusão definitiva, é necessário digitar **`permanently delete`**
- Isso ajuda a evitar exclusões acidentais

---

## Permissões (Permissionamento)

Por padrão, **todo bucket S3 é privado**.

- Objetos não podem ser acessados publicamente
- Nem mesmo via URL direta

### Para permitir acesso

- Ajustar as configurações de **Public Access**
- Criar uma **Bucket Policy** (arquivo JSON)

A Bucket Policy permite definir:
- **Quem** pode acessar
- **De onde** (IP, VPC, conta AWS)
- **O que** pode ser feito (GET, PUT, DELETE)
- **Em quais objetos ou pastas**

### Exemplos de controle

- Permitir apenas upload (`PUT`) em um folder
- Bloquear download (`GET`) de arquivos `.doc`
- Permitir leitura pública apenas de arquivos estáticos
- Restringir acesso por IP ou conta AWS

---

## Criptografia

### Criptografia em Repouso (dados armazenados)

- **SSE-S3**
  - Chaves gerenciadas automaticamente pela AWS

- **SSE-KMS**
  - Chaves gerenciadas pelo **AWS KMS**
  - Permite auditoria e controle fino de permissões

- **DSSE-KMS**
  - Criptografia em **duas camadas**
  - Maior nível de segurança
  - Indicada para dados sensíveis ou regulados

- **SSE-C (Deprecated)**
  - Chaves gerenciadas pelo cliente
  - Em processo de descontinuação

### Criptografia em Trânsito

- **HTTPS**
  - Garante transferência segura dos dados
  - Protege contra interceptação e ataques man-in-the-middle

---

## Replicação

A replicação permite copiar automaticamente objetos entre buckets, geralmente em **regiões diferentes**.

### Benefícios

- Redução de latência para usuários distantes
- Alta disponibilidade
- Disaster Recovery
- Compliance e redundância geográfica

### Exemplo de uso

- Aplicações globais
- Usuários em diferentes países
- Dependência de arquivos com baixa latência

---

## Migração e Integração de Dados

Para empresas com infraestrutura **on-premises** que desejam migrar dados para a AWS, especialmente com grande volumetria:

### Opções disponíveis

- **AWS Snowball Edge**
  - Dispositivo físico da AWS (≈ 80–210 TB)
  - Migração offline de grandes volumes
  - Ideal quando a internet não é suficiente

- **AWS DataSync**
  - Transferência online acelerada e gerenciada
  - Ideal com boa conectividade ou Direct Connect

- **AWS Direct Connect**
  - Link dedicado entre datacenter e AWS
  - Ideal para mover petabytes com alta performance

---

## Resumo Mental

- Amazon S3
  - Armazenamento de Objetos
  - Classes de Armazenamento
  - Versionamento
  - Permissões
  - Criptografia
  - Replicação
  - Migração e Integração
